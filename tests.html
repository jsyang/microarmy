<html><title>Test Code / Suites for microarmy</title>
<script src=util.js></script>
<script src=generate.js></script>
<script src=entity_.js></script>
<script src=entity_behavior.js></script>
<script>
function getID(id){ return document.getElementById(id); }

var test_BehaviorTreeShorthand=new function(){
  this.init=function(){
    document.body.innerHTML+=
    "Copy and paste your behavior tree code in here.<br>"+
    "Double-click to strip all whitespace.<hr>"+
    "<textarea rows=24 cols=80 id='btreecode'></textarea><br>"+
    "<a href='javascript:test_BehaviorTreeShorthand.convertCodeText()'>"+
    "Convert</a>";
  };
  
  this.convertCodeText=function(){
    var codeBox=getID('btreecode');
    codeBox.value=Behavior.ConvertShortHand(
      codeBox.value.replace(/[\n +?]/g,'')
    );
  }
};

var heightmap, peaks;
var test_proceduralGameWorld=new function(){
  this.init=function(){
    var cv=document.createElement("canvas");
    cv.width=2490; cv.height=192;
    document.body.appendChild(cv);
    var ctx=cv.getContext("2d");
    var BG=Generate.BG(ctx,cv.width,cv.height);    
    ctx.putImageData(BG,0,0);
    var FG=Generate.FG(ctx,cv.width,cv.height);
    ctx.putImageData(FG.imgdata_,0,0);
    heightmap=FG.heightmap_;
    peaks=FG.peaks_;
  };
};

var test_listAllCustomBehaviors=new function(){
  this.init=function(){
    var list=document.createElement("select");    
    list.setAttribute('multiple',true);
    list.style.width=160;
    var l=0;
    for(var i in Behavior.Custom) {
      var o=document.createElement("option");
      o.text=i;
      list.appendChild(o);
      l++;      
    }
    list.setAttribute('size',l);
    list.onchange=function(){
      document.getElementById("def").value=
      Behavior.Custom[this.options[this.selectedIndex].text].toString();
    }
    
    var def=document.createElement("textarea");
    def.id="def";
    def.setAttribute('rows',l+1);
    def.setAttribute('cols',120);
    
    document.body.appendChild(list);
    document.body.appendChild(def);
  };
};

</script><body bgcolor='#666'></body>
<script>document.body.onload=test_listAllCustomBehaviors.init;</script></html>